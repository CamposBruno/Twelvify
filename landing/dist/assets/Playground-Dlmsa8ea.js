import{r as i,j as e}from"./index-D67ObrJO.js";import{I as y}from"./main-DUHwht7A.js";import"./vendor-C2d6kFfn.js";function P(){const[t,a]=i.useState("idle"),[j,m]=i.useState(""),[n,h]=i.useState(!1),[b,d]=i.useState({message:"",visible:!1}),[w,r]=i.useState(!1);function o(s){d({message:s,visible:!0}),setTimeout(()=>d(c=>({...c,visible:!1})),5e3)}const N=i.useCallback(async()=>{a("loading"),m(""),r(!0);try{const s=await fetch("/api/playground",{method:"POST"});if(s.status===429){const x=await s.json();o(x.message||"Whoa, slow down! The AI needs a breather."),a("idle"),r(!1);return}if(!s.ok){o("Something went sideways. Give it another shot."),a("idle"),r(!1);return}a("typing");const c=s.body.getReader(),v=new TextDecoder;let p="",u="";for(;;){const{done:x,value:k}=await c.read();if(x)break;p+=v.decode(k,{stream:!0});const f=p.split(`
`);p=f.pop()??"";for(const g of f){if(!g.startsWith("data: "))continue;const l=JSON.parse(g.slice(6));if(l.error){o(l.message||"Something went wrong mid-stream."),r(!1),a("done"),h(!0);return}if(l.done){setTimeout(()=>r(!1),1200),a("done"),h(!0);return}if(l.chunk)for(const I of l.chunk){u+=I;const S=u;await new Promise(T=>setTimeout(()=>{m(S),T()},35))}}}}catch{o("Network hiccup. Check your connection and try again."),a("idle"),r(!1)}},[]);return e.jsx("section",{id:"try-it",className:"py-32 bg-slate-100",children:e.jsx("div",{className:"max-w-4xl mx-auto px-6",children:e.jsxs("div",{className:"zine-box bg-white p-12 relative overflow-hidden",children:[b.visible&&e.jsxs("div",{className:"absolute top-0 left-0 right-0 bg-slate-900 text-white font-punk px-6 py-4 text-sm flex items-center justify-between z-10 border-b-4 border-primary transition-all",children:[e.jsx("span",{children:b.message}),e.jsx("button",{onClick:()=>d(s=>({...s,visible:!1})),className:"ml-4 text-slate-400 hover:text-white",children:"âœ•"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-8 mb-12",children:[e.jsxs("div",{className:"relative",children:[e.jsx("h2",{className:"text-4xl mb-4 -rotate-3",children:"Is this even English?"}),e.jsx("p",{className:"font-punk text-slate-500 italic uppercase",children:"Click the button and watch the magic happen."})]}),e.jsxs("button",{onClick:N,disabled:n||t==="loading"||t==="typing",className:`${n?"bg-slate-400 cursor-not-allowed rotate-0":"bg-primary hover:bg-slate-900 rotate-2"} border-2 border-slate-900 px-8 py-4 font-display text-xl shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] transition-colors text-white`,children:[e.jsx(y,{name:t==="loading"?"hourglass_empty":"auto_fix_high",className:"inline-block align-middle mr-2 w-5 h-5"}),t==="loading"?"FIXING...":t==="done"||n?"FIXED!":"FIX THIS MESS"]})]}),e.jsx("div",{className:"p-10 border-4 border-dashed border-slate-300 bg-background-light rotate-1 min-h-[120px]",children:t==="idle"?e.jsxs("p",{className:"text-2xl lg:text-3xl font-punk leading-loose text-slate-800",children:["The"," ",e.jsx("span",{className:"bg-primary/20 px-1 border-b-4 border-primary",children:"superfluous"})," ","utilization of"," ",e.jsx("span",{className:"bg-primary/20 px-1 border-b-4 border-primary",children:"sesquipedalian"})," ","verbiage inevitably precipitates a profound state of"," ",e.jsx("span",{className:"bg-primary/20 px-1 border-b-4 border-primary",children:"intellectual vertigo"})," ","for the uninitiated observer."]}):e.jsxs("p",{className:"text-2xl lg:text-3xl font-punk leading-loose text-slate-800",children:[j,w&&e.jsx("span",{className:"animate-pulse ml-0.5 text-primary",children:"|"})]})}),e.jsxs("div",{className:"mt-12 flex flex-wrap items-center justify-center gap-10 font-punk font-bold uppercase text-sm",children:[e.jsxs("div",{className:`flex items-center gap-3 border-2 px-4 py-1 rotate-[-2deg] ${t==="done"?"line-through text-slate-300 border-slate-200":"text-primary border-primary font-black"}`,children:[e.jsx("div",{className:`size-3 ${t==="done"?"bg-slate-300":"bg-primary"}`})," COMPLEX ORIGINAL"]}),e.jsx(y,{name:"trending_flat",className:"text-slate-300 w-9 h-9"}),e.jsxs("div",{className:`flex items-center gap-3 border-2 px-4 py-1 rotate-[2deg] ${t==="done"?"text-primary border-primary font-black":"text-slate-400 border-slate-200"}`,children:[e.jsx("div",{className:`size-3 ${t==="done"?"bg-primary":"bg-slate-300"}`})," SIMPLIFIED VERSION"]})]})]})})})}export{P as default};
