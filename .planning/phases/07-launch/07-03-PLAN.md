---
phase: 07-launch
plan: 03
type: execute
wave: 2
depends_on:
  - "07-01"
  - "07-02"
autonomous: false
files_modified:
  - landing/index.html
  - landing/vite.config.ts
  - landing/src/index.css
requirements:
  - PERF-01
  - DEPLOY-03

must_haves:
  truths:
    - "Landing page is publicly accessible at https://twelvify.com"
    - "www.twelvify.com redirects to twelvify.com (301)"
    - "Lighthouse performance score is 90 or above on the live URL"
    - "Deploying a git tag matching `website_*` triggers a new Vercel production build"
    - "GoDaddy DNS is pointed at Vercel nameservers or A-records for twelvify.com"
  artifacts:
    - path: "landing/vercel.json"
      provides: "Already created in 07-02 — referenced here for domain redirect verification"
  key_links:
    - from: "GoDaddy DNS"
      to: "Vercel"
      via: "A-record or CNAME pointing twelvify.com to Vercel's IP/hostname"
      pattern: "76.76.21.21"
    - from: "Vercel project"
      to: "twelvify.com"
      via: "Custom domain configured in Vercel dashboard"
      pattern: "vercel domain"

user_setup:
  - service: vercel
    why: "Hosting platform for the landing page — requires account and project creation"
    env_vars: []
    dashboard_config:
      - task: "Create a new Vercel project connected to this git repository"
        location: "vercel.com/new → Import Git Repository → select Twelvify repo → set Root Directory to `landing/`"
      - task: "Configure deploy-on-tag (skip build unless website_* tag)"
        location: "Vercel Dashboard → Project → Settings → Git → Ignored Build Step field → enter: [ \"$VERCEL_GIT_COMMIT_TAG\" != website_* ]"
      - task: "Disable preview deployments"
        location: "Vercel Dashboard → Project → Settings → Git → uncheck 'Create a preview deployment for every pull request'"
      - task: "Add custom domain twelvify.com"
        location: "Vercel Dashboard → Project → Settings → Domains → Add twelvify.com and www.twelvify.com"
  - service: godaddy
    why: "Domain registrar — DNS must be updated to point twelvify.com to Vercel"
    env_vars: []
    dashboard_config:
      - task: "Update DNS A-record for @ (root) to Vercel's IP: 76.76.21.21"
        location: "GoDaddy → My Products → twelvify.com → DNS → Edit A record for @"
      - task: "Update DNS CNAME for www to cname.vercel-dns.com."
        location: "GoDaddy → My Products → twelvify.com → DNS → Add/edit CNAME for www"
---

<objective>
Deploy the landing page to production on Vercel, configure the custom domain (twelvify.com) via GoDaddy DNS, and verify Lighthouse performance hits 90+. This plan contains human checkpoints because domain and Vercel project setup require dashboard actions.

Purpose: The landing page goes live at twelvify.com, loading fast and ready to drive installs.
Output: Live site at https://twelvify.com with 90+ Lighthouse score.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-launch/07-02-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 1: Set up Vercel project, configure tag-based deploys, and point GoDaddy DNS</name>
  <action>Human-only setup: create Vercel project pointing to landing/, configure tag-based deploys, add custom domain in Vercel, and update GoDaddy DNS A-record and CNAME to point to Vercel. Trigger first deploy with a website_* git tag.</action>
  <what-built>
    Plan 07-01 added Plausible analytics + CTA click tracking.
    Plan 07-02 created vercel.json with build config, www redirect, cache headers, and documented Vercel setup steps.
    Both plans are committed. Now the Vercel project must be created and DNS must be configured — these steps require dashboard access.
  </what-built>
  <how-to-verify>
    Complete these steps in order:

    **1. Create Vercel project:**
    - Go to vercel.com/new
    - Import this git repository
    - Set "Root Directory" to `landing/`
    - Framework preset: Vite
    - Click Deploy (initial deploy to confirm build works)

    **2. Configure tag-based deploy (NO branch auto-deploys):**
    - Vercel Dashboard → Project → Settings → Git
    - Find "Ignored Build Step" field
    - Enter exactly: `[ "$VERCEL_GIT_COMMIT_TAG" != website_* ]`
      (This tells Vercel to skip builds unless a `website_*` git tag triggered the build)
    - Uncheck "Create a preview deployment for every pull request"
    - Save

    **3. Add custom domain:**
    - Vercel Dashboard → Project → Settings → Domains
    - Add `twelvify.com` (root) — Vercel will show the required DNS values
    - Add `www.twelvify.com` — set it to redirect to twelvify.com

    **4. Configure GoDaddy DNS:**
    - Log in to GoDaddy → My Products → twelvify.com → DNS Management
    - Update A record for `@` (root) to Vercel's IP: **76.76.21.21**
    - Add/update CNAME for `www` pointing to **cname.vercel-dns.com.**
    - DNS propagation may take up to 24 hours but is usually <15 minutes

    **5. Trigger a production deploy with a git tag:**
    ```bash
    git tag website_v1.1.0
    git push origin website_v1.1.0
    ```
    Watch Vercel dashboard — a new deployment should start.

    **When done:** Type "deployed" and the live URL (e.g. "deployed https://twelvify.com") to continue.
  </how-to-verify>
  <verify>Vercel dashboard shows a successful deployment triggered by the website_* git tag. The deployment URL is accessible in a browser.</verify>
  <done>Vercel project exists with root directory set to landing/, tag-based deploys configured, custom domain added, GoDaddy DNS updated to point to Vercel, and a successful production deployment is live.</done>
  <resume-signal>Type "deployed https://twelvify.com" (or the Vercel preview URL if domain not yet propagated)</resume-signal>
</task>

<task type="auto">
  <name>Task 2: Run Lighthouse audit and fix performance gaps</name>
  <files>
    landing/index.html
    landing/vite.config.ts
    landing/src/index.css
  </files>
  <action>
Run a Lighthouse performance audit against the live URL provided in the checkpoint resume signal. Use the Bash tool with Chrome headless:

```bash
npx lighthouse <LIVE_URL> --only-categories=performance --output=json --quiet --chrome-flags="--headless" 2>/dev/null | node -e "const d=require('fs').readFileSync('/dev/stdin','utf8'); const r=JSON.parse(d); const s=r.categories.performance.score*100; console.log('Performance score:',s); const audits=r.audits; ['first-contentful-paint','largest-contentful-paint','total-blocking-time','cumulative-layout-shift','speed-index'].forEach(k=>console.log(k+':',audits[k]?.displayValue));"
```

**If score is already 90+:** No changes needed. Document score in SUMMARY and proceed.

**If score is 85-89 (minor fixes needed):** Apply these targeted improvements:

*LCP issue (fonts/render-blocking):*
- The Google Fonts `<link rel="stylesheet">` in index.html can be made non-render-blocking by adding `media="print" onload="this.media='all'"` and a `<noscript>` fallback. Only do this if Lighthouse flags render-blocking resources.

*CLS issue:*
- Add explicit `width` and `height` attributes to any `<img>` tags in the landing page to prevent layout shift.

*TBT issue (large JS chunks):*
- If Vite produced a single large chunk, enable manual chunking in vite.config.ts:
  ```typescript
  build: {
    rollupOptions: {
      output: {
        manualChunks: { vendor: ['react', 'react-dom'] }
      }
    }
  }
  ```
  Then rebuild (`cd landing && npm run build`) and push a new `website_*` tag.

**If score is below 85:** Read the full Lighthouse JSON output to identify specific failing audits. Apply targeted fixes for each failing audit. Do not make blind optimisations — fix what Lighthouse specifically flags.

**Target: 90+ performance score.** Run Lighthouse again after any changes to confirm.
  </action>
  <verify>
Lighthouse performance score is 90 or above.
Command: `npx lighthouse <LIVE_URL> --only-categories=performance --output=json --quiet --chrome-flags="--headless" 2>/dev/null | node -e "const d=require('fs').readFileSync('/dev/stdin','utf8'); const r=JSON.parse(d); console.log('Score:', r.categories.performance.score*100);"`
  </verify>
  <done>
Lighthouse performance score ≥ 90 on the live twelvify.com URL (or Vercel preview URL). Score and individual metric values documented in SUMMARY.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Final launch verification — live site, www redirect, analytics, and Lighthouse score</name>
  <action>Human verifies the live site at twelvify.com, confirms www redirect works, checks analytics script loads, clicks CTA buttons to confirm tracking fires, and validates the Lighthouse score Claude reported.</action>
  <what-built>
    Analytics + CTA tracking (Plan 01), Vercel config with www redirect and cache headers (Plan 02), live deployment + DNS setup (Plan 03 Task 1), Lighthouse performance at 90+ (Plan 03 Task 2).
  </what-built>
  <how-to-verify>
    Verify the complete launch:

    1. **Live site:** Visit https://twelvify.com — landing page loads correctly with all sections visible.

    2. **www redirect:** Visit https://www.twelvify.com — should 301-redirect to https://twelvify.com (check in browser Network tab or use: `curl -I https://www.twelvify.com`).

    3. **Playground works:** Click "Fix This Mess" button — AI simplification streams in. (Note: playground requires the Express backend to be running; if the backend isn't deployed yet, skip this check.)

    4. **Analytics script present:** Open DevTools → Network → filter "plausible" — confirm the Plausible script loads.

    5. **CTA click tracking:** Click "Add to Chrome" in Nav — check browser Console for any errors. Open Plausible dashboard (plausible.io) → Events — confirm 'cta_click' appears (may take a few minutes).

    6. **Tag-based deploy works:** Confirm the Vercel dashboard shows the deployment was triggered by the `website_v1.1.0` tag, not a branch push.

    7. **Lighthouse score:** Confirm Claude reported 90+ in Task 2.

    Type "approved" to mark Phase 7 complete, or describe any issues found.
  </how-to-verify>
  <verify>All seven checklist items above confirmed: live site accessible, www redirect works, analytics script loads, CTA tracking fires without errors, tag-based deploy confirmed in Vercel dashboard, Lighthouse score 90+ verified.</verify>
  <done>Phase 7 is complete: twelvify.com is live, loading fast (Lighthouse 90+), deploying on website_* tags, and tracking analytics from day one.</done>
  <resume-signal>Type "approved" or describe issues</resume-signal>
</task>

</tasks>

<verification>
1. https://twelvify.com is publicly accessible
2. https://www.twelvify.com redirects to https://twelvify.com
3. Lighthouse performance score ≥ 90
4. Vercel shows deployment triggered by website_* tag
5. Plausible script present in page source
6. cta_click events fire on CTA button clicks (no JS errors)
</verification>

<success_criteria>
The landing page is live at twelvify.com, loads with Lighthouse performance 90+, deploys automatically when a `website_*` git tag is pushed, and tracks page views and CTA clicks via Plausible Analytics.
</success_criteria>

<output>
After completion, create `.planning/phases/07-launch/07-03-SUMMARY.md` following the summary template.
</output>
