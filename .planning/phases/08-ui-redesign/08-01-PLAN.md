---
phase: 08-ui-redesign
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/entrypoints/popup/index.html
  - src/entrypoints/popup/App.tsx
  - src/entrypoints/popup/SettingsPanel.tsx
autonomous: true
requirements:
  - UIRD-01
  - UIRD-02
  - UIRD-03
  - UIRD-06

must_haves:
  truths:
    - "Popup panel displays 'Twelveify' title in Permanent Marker font"
    - "Section labels (Age Level, Explanation Depth, etc.) render in Special Elite font at 12px+"
    - "Popup background is light off-white (#f8f6f6) with subtle dotted grid pattern"
    - "Tone and depth selector buttons use sharp 0px border-radius, red fill (#f56060) when active, white text when active"
    - "Popup header title has a subtle rotation hint (1-2 degrees) as the only rotated element"
    - "All borders are 1px sharp with no rounded corners on interactive elements; shadows are 3-4px offset maximum"
    - "If Google Fonts CDN fails, popup renders legibly with cursive/monospace/sans-serif system font fallbacks"
  artifacts:
    - path: "src/entrypoints/popup/index.html"
      provides: "Non-blocking Google Fonts link for Permanent Marker, Special Elite, Inter"
      contains: "fonts.googleapis.com"
    - path: "src/entrypoints/popup/App.tsx"
      provides: "Branded popup header with Permanent Marker title, wand icon, off-white grid background"
      min_lines: 30
    - path: "src/entrypoints/popup/SettingsPanel.tsx"
      provides: "Branded popup body with Special Elite labels, sharp red button group, clean inputs"
      min_lines: 80
  key_links:
    - from: "src/entrypoints/popup/index.html"
      to: "src/entrypoints/popup/App.tsx"
      via: "Google Fonts loaded in HTML head, consumed via fontFamily CSS property in component"
      pattern: "fonts.googleapis.com.*Permanent\\+Marker.*Special\\+Elite"
    - from: "src/entrypoints/popup/SettingsPanel.tsx"
      to: "LABEL_STYLE"
      via: "fontFamily references Special Elite"
      pattern: "Special Elite"
    - from: "src/entrypoints/popup/App.tsx"
      to: "h1 title"
      via: "fontFamily references Permanent Marker"
      pattern: "Permanent Marker"
---

<objective>
Apply the toned-down zine/punk brand aesthetic to the popup panel: custom fonts (Permanent Marker, Special Elite), brand colors (red primary, off-white background), sharp borders, and subtle dotted grid background.

Purpose: Transform the popup from a generic unstyled panel into a branded Twelvify experience consistent with the landing page, while keeping it clean and usable.
Output: Styled popup panel with font injection in HTML, branded App.tsx header, and updated SettingsPanel.tsx with brand colors and Special Elite labels.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-ui-redesign/08-CONTEXT.md
@.planning/phases/08-ui-redesign/08-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Inject Google Fonts into popup HTML</name>
  <files>src/entrypoints/popup/index.html</files>
  <action>
Add Google Fonts links to the popup HTML head using the non-blocking print-media swap pattern (same pattern as the landing page). Load Permanent Marker, Special Elite, and Inter with font-display=swap.

Add these links in the `<head>` before the closing `</head>` tag:

```html
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Special+Elite&family=Inter:wght@400;700&display=swap"
  rel="stylesheet"
  media="print"
  onload="this.media='all'"
/>
<noscript>
  <link
    href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Special+Elite&family=Inter:wght@400;700&display=swap"
    rel="stylesheet"
  />
</noscript>
```

The `media="print"` + `onload="this.media='all'"` trick loads fonts without blocking render. The noscript fallback handles JS-disabled contexts. This is the proven landing page pattern — copy verbatim.

NOTE: Do NOT use `@import url()` in a `<style>` tag inside a React component — the popup HTML is the correct injection point for non-blocking font loading.
  </action>
  <verify>Open src/entrypoints/popup/index.html and confirm it contains both the preconnect links and the Google Fonts stylesheet link with `media="print"`.</verify>
  <done>index.html head section contains preconnect to fonts.googleapis.com and fonts.gstatic.com, plus the Google Fonts CSS link with media="print" and onload swap, plus noscript fallback.</done>
</task>

<task type="auto">
  <name>Task 2: Brand the popup App.tsx header</name>
  <files>src/entrypoints/popup/App.tsx</files>
  <action>
Rewrite App.tsx to apply the brand aesthetic to the popup header and container. The current file has a generic white background, indigo spark icon, and plain system-font title. Replace with:

**Container:**
- Width: 320px (keep current; expand to 340px if Special Elite labels wrap — test during implementation)
- Background: `#f8f6f6` (warm off-white brand background)
- Background image: subtle dotted grid — `radial-gradient(#e5e7eb 0.5px, transparent 0.5px)`, backgroundSize: `14px 14px` (larger than landing page 10px for popup readability)
- Padding: 16px (keep current)
- fontFamily: `"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif"` (body fallback)

**Header (icon + title row):**
- Keep flex layout with 8px gap and 16px bottom margin
- Replace the 4-point star SVG with a magic wand SVG (simple stick + star tip):
  ```jsx
  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#f56060" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" aria-hidden="true">
    <path d="M15 4l5 5" />
    <path d="M5 19L19 5" />
    <path d="M3 21l3-3" />
    <circle cx="18" cy="6" r="1" fill="#f56060" stroke="none" />
    <circle cx="6" cy="18" r="1" fill="#f56060" stroke="none" />
  </svg>
  ```
  (This renders as a wand stick with sparkle dots at each end — clean, recognizable, red brand color)

**Title `<h1>`:**
- fontSize: `20px`
- fontWeight: `700`
- color: `#111827`
- fontFamily: `"'Permanent Marker', cursive"` (display font; cursive is the system fallback — UIRD-06)
- margin: 0
- Apply a subtle rotation: `transform: 'rotate(-1.5deg)'` (CONTEXT.md: 1-2 accent elements may rotate; title is the ONE rotated element in the popup)
- `display: 'inline-block'` (required for transform to apply on inline element)
- `whiteSpace: 'nowrap'` (prevents wrapping if cursive fallback is wider than Permanent Marker)

Keep the `<SettingsPanel />` import and render unchanged.

Remove any existing inline `<style>` tags if present in the current file.
  </action>
  <verify>Run `cd /Users/brunocampos/Twelvify && npx wxt build 2>&1 | tail -5` to confirm build succeeds with no TypeScript errors. Check that App.tsx renders without lint/type errors.</verify>
  <done>App.tsx builds without errors. Popup container has off-white background with dotted grid. Header shows wand icon (red, #f56060), Permanent Marker title with -1.5deg rotation, and body defaults to Inter/system sans-serif.</done>
</task>

<task type="auto">
  <name>Task 3: Brand the SettingsPanel.tsx with zine aesthetic</name>
  <files>src/entrypoints/popup/SettingsPanel.tsx</files>
  <action>
Update all style constants in SettingsPanel.tsx to apply the brand aesthetic. Preserve all logic — only style objects change.

**LABEL_STYLE** (section labels like "Age Level", "Explanation Depth"):
- fontSize: `'12px'` (increase from 11px — Special Elite is harder to read at small sizes per RESEARCH.md pitfall 3)
- fontFamily: `"'Special Elite', monospace"` (punk typewriter label font, with monospace system fallback — UIRD-01, UIRD-06)
- fontWeight: `'600'`
- textTransform: `'uppercase' as const`
- letterSpacing: `'0.08em'`
- color: `'#4b5563'` (slightly darker than current #6b7280 for better contrast with off-white bg)
- margin: `'0'`

**buttonStyle function** (tone + depth selector buttons):
- padding: `'6px 12px'`
- border: `'1px solid'`
- borderColor: active → `'#f56060'`, inactive → `'#d1d5db'`
- borderRadius: `'0px'` (sharp rectangle — zine aesthetic, no rounded corners — CONTEXT.md decision)
- background: active → `'#f56060'`, inactive → `'#f9fafb'`
- color: active → `'#ffffff'`, inactive → `'#374151'`
- cursor: `'pointer'`
- fontSize: `'13px'`
- fontFamily: `'system-ui, -apple-system, sans-serif'` (keep readable for button labels — CONTEXT.md: inputs stay clean)
- fontWeight: active → `'600'`, inactive → `'400'`
- transition: `'all 0.15s ease'`
- Remove borderRadius: '6px' (current rounded corners)

**INPUT_STYLE** (text inputs for profession and shortcut):
- Keep mostly unchanged (inputs stay clean per CONTEXT.md)
- Update border: `'1px solid #d1d5db'` (match new border color token)
- borderRadius: `'0px'` (sharp, consistent with button style)
- Keep white background for readability

**RADIO_LABEL_STYLE** (display mode radio labels):
- Keep unchanged (functional, not decorative)

**HELPER_TEXT_STYLE** and **NOTE_STYLE**:
- Keep unchanged (readability text, no brand font needed)

**PANEL_STYLE**:
- Keep `display: 'flex', flexDirection: 'column', gap: '20px'` unchanged

**SECTION_STYLE**:
- Add: `borderBottom: '1px solid #f0eeee'` and `paddingBottom: '16px'` to last 3 sections (optional — adds separation between sections; skip if too cluttered)
- Actually: Keep SECTION_STYLE unchanged to avoid over-engineering. The dotted grid bg in App.tsx provides enough structure.

Do NOT rotate buttons, inputs, or any interactive control element (CONTEXT.md: only 1-2 accent elements may rotate, controls stay straight — RESEARCH.md pitfall 4).
  </action>
  <verify>Run `cd /Users/brunocampos/Twelvify && npx wxt build 2>&1 | tail -5` to confirm TypeScript build success. Inspect SettingsPanel.tsx style constants — confirm LABEL_STYLE has Special Elite font, buttonStyle has borderRadius 0px and #f56060 active color.</verify>
  <done>SettingsPanel.tsx builds without errors. LABEL_STYLE uses Special Elite at 12px. buttonStyle uses 0px borderRadius and #f56060 active state. Inputs use 0px borderRadius. No interactive element is rotated.</done>
</task>

</tasks>

<verification>
1. Run `cd /Users/brunocampos/Twelvify && npx wxt build` — build must succeed with zero TypeScript errors
2. Check index.html contains Google Fonts preconnect + stylesheet link with media="print"
3. Check App.tsx: container background is #f8f6f6, dotted grid radial-gradient is applied, title uses Permanent Marker font, wand SVG is present (not 4-point star), title has rotate(-1.5deg) transform
4. Check SettingsPanel.tsx: LABEL_STYLE fontFamily includes 'Special Elite', buttonStyle borderRadius is '0px', active button color is '#f56060', input borderRadius is '0px'
5. Confirm no rotation on buttons, inputs, or radio controls — only the h1 title element has transform:rotate
</verification>

<success_criteria>
- Google Fonts (Permanent Marker, Special Elite, Inter) loaded non-blockingly in popup HTML
- Popup header shows branded wand icon + Permanent Marker title with subtle rotation
- Popup container has off-white (#f8f6f6) background with subtle dotted grid pattern
- Section labels render in Special Elite font at 12px
- Tone/depth buttons are sharp rectangles (0px radius), red (#f56060) when active
- Text inputs have sharp borders (0px radius) and stay clean/readable
- System font fallbacks declared (cursive, monospace, sans-serif) on every font-family declaration
- Build passes with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/08-ui-redesign/08-01-SUMMARY.md`
</output>
