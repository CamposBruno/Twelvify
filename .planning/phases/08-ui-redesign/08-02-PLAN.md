---
phase: 08-ui-redesign
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/FloatingButton.tsx
  - src/components/FloatingPopup.tsx
  - src/components/ErrorTooltip.tsx
autonomous: true
requirements:
  - UIRD-04
  - UIRD-05

must_haves:
  truths:
    - "Floating button displays as a sharp red (#f56060) rectangle with 0px border-radius"
    - "Floating button shows a wand icon (not the current 4-point star) in white color"
    - "Floating button has a 1px sharp border and 2-3px offset box-shadow"
    - "Undo button keeps green (#10b981) but matches the sharp 0px border-radius aesthetic"
    - "z-index on floating button container remains 2147483647 (unchanged — must not regress)"
    - "FloatingPopup result display uses off-white background (#f8f6f6), 0px border-radius, and 1px border"
    - "ErrorTooltip uses sharp borders (0px radius) and small shadow consistent with brand"
  artifacts:
    - path: "src/components/FloatingButton.tsx"
      provides: "Branded floating button: red bg, wand SVG, sharp corners, small shadow, z-index preserved"
      min_lines: 60
    - path: "src/components/FloatingPopup.tsx"
      provides: "Branded floating result popup: off-white bg, sharp border, brand shadow"
    - path: "src/components/ErrorTooltip.tsx"
      provides: "Branded error tooltip: sharp border, small shadow, amber state preserved"
  key_links:
    - from: "src/components/FloatingButton.tsx"
      to: "zIndex: 2147483647"
      via: "Must remain at max z-index to stay above Gmail/YouTube/GitHub/Reddit/Medium UI"
      pattern: "zIndex.*2147483647"
    - from: "src/components/FloatingButton.tsx"
      to: "simplifyBgColor"
      via: "Normal state must use #f56060 (red), error state uses #f59e0b (amber), loading state uses #f56060"
      pattern: "f56060"
---

<objective>
Apply the toned-down zine/punk brand aesthetic to the content-script-injected components: floating button (wand icon, red color, sharp corners), floating popup (off-white, sharp border), and error tooltip (brand-consistent sharp style).

Purpose: Complete the brand refresh for all user-visible extension UI. The floating button is the primary user touchpoint — it must look branded and remain accessible on every complex website.
Output: FloatingButton.tsx with red brand color + wand icon, FloatingPopup.tsx with brand treatment, ErrorTooltip.tsx with sharp brand borders.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-ui-redesign/08-CONTEXT.md
@.planning/phases/08-ui-redesign/08-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Brand the FloatingButton with red color and wand icon</name>
  <files>src/components/FloatingButton.tsx</files>
  <action>
Update FloatingButton.tsx styles and icon. Preserve all existing logic (state management, storage hooks, loading/error states, visibility logic, shake animation, labels). Only change visual styles and the simplify icon SVG.

**simplifyBgColor variable** — update the color assignment:
```typescript
const simplifyBgColor = isLoading
  ? '#f56060'      // Red during loading (was indigo)
  : errorState
    ? '#f59e0b'    // Amber on error (CONTEXT.md: keep amber for error states)
    : '#f56060';   // Red default (CONTEXT.md: red replaces indigo as primary)
```

**Undo button styles** — update to match sharp aesthetic while keeping green:
```typescript
style={{
  display: 'flex',
  alignItems: 'center',
  gap: '6px',
  padding: '10px 14px',
  backgroundColor: '#10b981',    // Keep green (CONTEXT.md locked decision)
  color: '#ffffff',
  border: '1px solid #059669',   // Add sharp 1px border (was 'none')
  borderRadius: '0px',           // Sharp rectangle (was '8px')
  fontSize: '14px',
  fontWeight: '600',
  cursor: 'pointer',
  boxShadow: '0 2px 3px rgba(0, 0, 0, 0.1)',  // Small shadow (was 0 4px 12px)
  fontFamily: 'system-ui, -apple-system, sans-serif',
}}
```

**Simplify button styles** — update to brand aesthetic:
```typescript
style={{
  display: 'flex',
  alignItems: 'center',
  gap: '8px',
  padding: '10px 16px',
  backgroundColor: simplifyBgColor,
  color: '#ffffff',
  border: '1px solid rgba(0,0,0,0.12)',   // Thin sharp border (was 'none')
  borderRadius: '0px',                    // Sharp rectangle (was '8px')
  fontSize: '14px',
  fontWeight: '600',
  cursor: isLoading ? 'not-allowed' : 'pointer',
  boxShadow: '0 2px 3px rgba(0, 0, 0, 0.1)',  // Small 2-3px shadow (was 0 4px 12px)
  fontFamily: 'system-ui, -apple-system, sans-serif',
  opacity: isLoading ? 0.8 : 1,
  animation: isShaking ? 'twelvify-shake 0.6s ease' : undefined,
}}
```

**Replace the idle sparkle SVG** (4-point star `d="M12 2L9.5 9.5 2 12l7.5 2.5L12 22l2.5-7.5L22 12l-7.5-2.5L12 2z"`) with a magic wand SVG:
```jsx
<svg
  width="16"
  height="16"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  strokeWidth="2"
  strokeLinecap="round"
  strokeLinejoin="round"
  aria-hidden="true"
>
  <line x1="3" y1="21" x2="21" y2="3" />
  <path d="M21 3l-2.5 1M21 3l-1 2.5" />
  <path d="M3 21l2.5-1M3 21l1-2.5" />
  <circle cx="12" cy="12" r="1" fill="currentColor" stroke="none" />
  <circle cx="7" cy="7" r="0.8" fill="currentColor" stroke="none" />
  <circle cx="17" cy="17" r="0.8" fill="currentColor" stroke="none" />
</svg>
```
(This is a diagonal wand stick with sparkle circles — recognizable, clean, uses currentColor so it inherits white from button text)

**DO NOT change:**
- Container position/z-index (zIndex: 2147483647 MUST stay — RESEARCH.md: prevents z-index conflicts on Gmail/YouTube/GitHub/Reddit/Medium)
- Loading spinner SVG (already brand-neutral)
- Visibility logic (opacity/pointerEvents driven by isVisible)
- The shake + spin animation keyframes in `<style>` tag
- The aria-label attributes
  </action>
  <verify>Run `cd /Users/brunocampos/Twelvify && npx wxt build 2>&1 | tail -5` — build must succeed. Grep for the old indigo color: `grep -n "6366f1" /Users/brunocampos/Twelvify/src/components/FloatingButton.tsx` — should return empty (indigo fully replaced). Grep for z-index: `grep -n "2147483647" /Users/brunocampos/Twelvify/src/components/FloatingButton.tsx` — must return a result.</verify>
  <done>FloatingButton.tsx builds without errors. Indigo (#6366f1) is fully replaced by red (#f56060) in normal/loading states. Amber (#f59e0b) kept for error state. Buttons have 0px border-radius and 2-3px shadow. Wand SVG replaces 4-point star. z-index 2147483647 preserved.</done>
</task>

<task type="auto">
  <name>Task 2: Brand FloatingPopup and ErrorTooltip</name>
  <files>src/components/FloatingPopup.tsx, src/components/ErrorTooltip.tsx</files>
  <action>
Apply brand treatment to both secondary components. These are shown in content-script context (injected into pages), so no Google Fonts available — system fonts only. Apply sharp borders, brand shadow, and color palette.

**FloatingPopup.tsx — containerStyle updates:**
- background: `'#f8f6f6'` (brand off-white, was '#ffffff')
- border: `'1px solid #d1d5db'` (1px sharp, was '1px solid #e5e7eb' — slightly darker for definition)
- borderRadius: `'0px'` (sharp rectangle, was '12px')
- boxShadow: `'0 3px 4px rgba(0,0,0,0.1)'` (small offset, was '0 8px 24px rgba(0,0,0,0.12)')
- Keep: position fixed, bottom/right placement, maxWidth 360px, maxHeight 300px, overflowY auto, zIndex 2147483646, opacity/transition

**FloatingPopup.tsx — titleStyle updates:**
- fontFamily: `"'Special Elite', monospace"` (brand label font + system fallback — UIRD-06 spirit, though CDN not available here system monospace works as fallback)
- fontSize: `'12px'` (keep)
- Keep uppercase, letterSpacing, margin

**FloatingPopup.tsx — closeButtonStyle:**
- Keep unchanged (functional element, minimal styling appropriate)

**FloatingPopup.tsx — headerStyle and bodyStyle:**
- Keep unchanged

**ErrorTooltip.tsx — container div style updates:**
- borderRadius: `'0px'` (sharp rectangle, was '8px')
- boxShadow: `'0 2px 3px rgba(0, 0, 0, 0.15)'` (small, was '0 4px 16px rgba(0, 0, 0, 0.25)')
- Add border: `'1px solid rgba(0,0,0,0.1)'` (thin sharp border for definition)
- Keep: backgroundColor '#1f2937' (dark bg for contrast), color '#f9fafb', padding, fontSize, fontFamily, maxWidth, minWidth, cursor

**ErrorTooltip.tsx — arrow div style:**
- Keep unchanged (arrow shape uses border trick, no border-radius applies)

NOTE: No Google Fonts in content-script context — fonts.googleapis.com links only work in popup HTML. For FloatingPopup "Simplified" label, `'Special Elite', monospace` will gracefully fall back to system monospace (acceptable — the floating popup is functional UI, not primary brand surface).
  </action>
  <verify>Run `cd /Users/brunocampos/Twelvify && npx wxt build 2>&1 | tail -5` — build must succeed. Check FloatingPopup.tsx has borderRadius '0px' and background '#f8f6f6'. Check ErrorTooltip.tsx has borderRadius '0px'. Grep for old rounded values: `grep -n "borderRadius: '12px'" /Users/brunocampos/Twelvify/src/components/FloatingPopup.tsx` should return empty.</verify>
  <done>FloatingPopup.tsx builds without errors. Container uses off-white background, 0px border-radius, small shadow. ErrorTooltip has 0px border-radius, thin border, smaller shadow. Both maintain all existing functional logic.</done>
</task>

</tasks>

<verification>
1. Run `cd /Users/brunocampos/Twelvify && npx wxt build` — zero errors
2. Grep check: `grep -n "6366f1" /Users/brunocampos/Twelvify/src/components/FloatingButton.tsx` — empty (indigo gone)
3. Grep check: `grep -n "2147483647" /Users/brunocampos/Twelvify/src/components/FloatingButton.tsx` — returns result (z-index preserved)
4. Grep check: `grep -n "borderRadius" /Users/brunocampos/Twelvify/src/components/FloatingButton.tsx | grep -v "0px"` — should show no rounded corners on buttons
5. Grep check: `grep -n "f56060" /Users/brunocampos/Twelvify/src/components/FloatingButton.tsx` — shows red in simplifyBgColor
6. Verify FloatingPopup.tsx background is '#f8f6f6' and borderRadius is '0px'
7. Verify ErrorTooltip.tsx borderRadius is '0px'
</verification>

<success_criteria>
- FloatingButton uses red (#f56060) as primary color (replaces indigo completely)
- FloatingButton displays wand SVG instead of 4-point star
- All floating UI elements (button, undo, popup, tooltip) use 0px border-radius (sharp corners)
- All shadows are small/subtle (2-3px offset max)
- z-index 2147483647 preserved on floating button container
- Undo button keeps green (#10b981)
- Error state keeps amber (#f59e0b)
- Build passes with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/08-ui-redesign/08-02-SUMMARY.md`
</output>
